<!--

    ShinyProxy

    Copyright (C) 2016-2021 Open Analytics

    ===========================================================================

    This program is free software: you can redistribute it and/or modify
    it under the terms of the Apache License as published by
    The Apache Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    Apache License for more details.

    You should have received a copy of the Apache License
    along with this program.  If not, see <http://www.apache.org/licenses/>

-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head lang="en">
        <title th:text="${title}"></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" media="screen" th:href="@{${resourcePrefix} + ${bootstrapCss}}"/>
        <link rel="stylesheet" media="screen" th:href="@{${resourcePrefix} + '/css/default.css'}"/>
        <link rel="stylesheet" media="screen" th:href="@{/assets/css/bootstrap-3.4.1/bootstrap.min.css}"/>
        <link rel="stylesheet" media="screen" th:href="@{/assets/css/main.css}"/>
        <!-- <link rel="stylesheet" media="screen" th:href="@{/assets/css/2-col-portfolio.css}"/> -->
        <script th:src="@{${resourcePrefix} + ${jqueryJs}}"></script>
        <script th:src="@{${resourcePrefix} + ${bootstrapJs}}"></script>
        <script th:src="@{${resourcePrefix} + ${handlebars}}"></script>
        <script th:src="@{${resourcePrefix} + '/js/shiny.app.js' }"></script>
        <script th:src="@{${resourcePrefix} + '/js/shiny.api.js' }"></script>
        <script th:src="@{${resourcePrefix} + '/js/shiny.connections.js'}"></script>
        <script th:src="@{${resourcePrefix} + '/js/shiny.instances.js' }"></script>
        <script th:src="@{${resourcePrefix} + '/js/shiny.ui.js' }"></script>
        <script th:src="@{${resourcePrefix} + '/js/shiny.common.js'}"></script>
        <script th:src="@{${resourcePrefix} + '/handlebars/precompiled.js'}"></script>
    </head>
    <body>
        <!-- navigation bar -->
        <div th:replace="~{fragments/navbar :: navbar}"></div>

        <div class="description">
            <div class="description-subtitle">IRCCS San Camillo Hospital - Interactive Applications for Research and Clinical Practice</div>
            <div class="description-text">
                Welcome to the IRCCS San Camillo Hospital App Collection. <br><br>
                On this page, you will find a curated selection of applications developed at IRCCS San Camillo Hospital. These tools have been created to serve two main purposes:
                <br><br>
                <a href="#apps-clinical"><strong>Clinical Support</strong></a><br>
                Some apps function as practical tools to assist clinicians in their daily workâ€”such as classifying patient performance against normative datasets or streamlining specific clinical assessments.
                <br><br>
                <a href="#apps-scientific"><strong>Scientific Communication</strong></a><br>
                Other apps are designed to provide interactive visualizations of results published in scientific articles, enhancing the clarity and accessibility of complex data. This approach aligns with the principles of Open Science, promoting transparency, reproducibility, and wider dissemination of scientific knowledge. By making research outputs more interactive and publicly accessible, we aim to support a more inclusive and collaborative scientific ecosystem.
                <br><br>
                Each application includes detailed instructions and information about its intended use. We encourage you to explore them individually to better understand their features and potential applications.
                <br>
                If you have any questions or need further information, please do not hesitate to contact the respective author listed for each app.
                <br><br>
                All the source code for this website and the associated applications is openly available on <a href="https://github.com/SanCamillo-NeurophysiologyLab/shiny-server">GitHub</a>. For general inquiries or technical information, please contact alessandro.tonin@hsancamillo.it.
                </div>
        </div>
        <th:block th:each="group: ${templateGroups}">
            <div class="title-apps" th:text="${group.properties.get('display-name')}"></div>
            <div class="container" th:id="'apps-' + ${group.id}">
                <div th:each="app: ${groupedApps.get(group.id)}">
                    <div class="card">
                        <div class="card-title" th:text="${app.displayName == null} ? ${app.id} : ${app.displayName}"></div>
                        <div class="card-logo">
                            <img class="img-responsive" th:if="${appLogos.get(app) != null}"
                                th:with="logo=${appLogos.get(app)}" th:height="${logo.height}"
                                th:src="${logo.src}" th:style="${logo.style}" th:width="${logo.width}">
                        </div>
                        <div class="card-description" th:if="${app.description != null}" th:text="${app.description}"></div>
                        <div class="card-author" th:if="${@thymeleaf.getTemplateProperty(app.id, 'author')}">
                            <strong>Author: </strong><span th:text="${@thymeleaf.getTemplateProperty(app.id, 'author')}"></span> 
                            <a th:if="${@thymeleaf.getTemplateProperty(app.id, 'contact')}" class="email-icon" th:href="'mailto:'+${@thymeleaf.getTemplateProperty(app.id, 'contact')}" title="Contact Author">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 16 16">
                                <path d="M0 4a2 2 0 012-2h12a2 2 0 012 2v.217l-8 4.8-8-4.8V4zm0 1.383v6.634l5.803-3.482L0 5.383zM6.761 8.83l-6.52 3.913A2 2 0 002 14h12a2 2 0 001.76-1.257l-6.52-3.913L8 9.583l-1.239-.753zM16 5.383l-5.803 3.152L16 12.017V5.383z"/>
                                </svg>
                            </a>
                        </div>
                        <!-- <div class="card-contact" th:if="${@thymeleaf.getTemplateProperty(app.id, 'contact')}"><strong>Contact: </strong><span th:text="${@thymeleaf.getTemplateProperty(app.id, 'contact')}"></span></div> -->
                        <div class="card-doi" th:if="${@thymeleaf.getTemplateProperty(app.id, 'doi')}"><strong>DOI: </strong><a th:href="'https://doi.org/' + ${@thymeleaf.getTemplateProperty(app.id, 'doi')}"><span th:text="${@thymeleaf.getTemplateProperty(app.id, 'doi')}"></span></a></div>
                        <a th:href="@{/app/}+${app.id}" class="btn">Launch App</a>
                    </div>
                </div>
            </div>
        </th:block>

        <div th:if="${myAppsMode == 'Inline'}" class="col-md-5 col-lg-4 col-xs-12 myApps-inline">
            <div class="myApps-title">
                <h4>My apps</h4>
            </div>
            <div id="myApps" class="myApps">
            </div>
            <div class="myApps-footer">
                <button onclick="Shiny.common.onStopAllApps();" id="stop-all-apps-btn" type="button"
                        class="btn pull-left btn-danger">Stop all apps
                </button>
                <button type="button" disabled class="btn pull-left btn-danger" id="stopping-all-apps-btn">Stopping
                    all apps...
                </button>
            </div>
        </div>

        <div th:replace="fragments/modal :: modal"></div>

        <script type="text/javascript" th:inline="javascript">
            $(window).on('load', function () {
                window.Shiny.common.init([[${contextPath}]], [[${application_name}]], [[${spInstance}]], [[${appMaxInstances}]], [[${myAppsMode}]], [[${pauseSupported}]]);
                window.Shiny.common.startIndex();
            });
        </script>
    </body>
</html>
